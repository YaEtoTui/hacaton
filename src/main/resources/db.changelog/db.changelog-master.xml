<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="hacaton" author="SazhinEA" context="hacaton">

        <createTable tableName="project">

            <column name="Наименование" type="varchar">
                <constraints primaryKey="true"/>
            </column>

            <column name="Описание" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Плановая дата начала" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Плановая дата завершения" type="varchar">
                <constraints nullable="false"/>
            </column>

        </createTable>

        <createTable tableName="task">

            <column name="Номер" type="int4">
                <constraints primaryKey="true"/>
            </column>

            <column name="Заголовок" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Описание" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Приоритет" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Заказчик" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Приёмщик" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="project_id" type="varchar">
                <constraints foreignKeyName="task_project_fk"
                             referencedTableName="project"
                             referencedColumnNames="Наименование"/>
            </column>

            <column name="Команда" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Тип задачи" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Статус" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Состояние" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Аналитик" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Разработчик" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Тестировщик" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Релиз менеджер" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="SP анализ" type="int4">
                <constraints nullable="false"/>
            </column>

            <column name="SP разработка" type="int4">
                <constraints nullable="false"/>
            </column>

            <column name="SP тестирование" type="int4">
                <constraints nullable="false"/>
            </column>

            <column name="SP релиз" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Дата создания" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Заблокирована задачей с номером" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Блокирует задачу с номером" type="varchar">
                <constraints nullable="false"/>
            </column>

        </createTable>

        <createTable tableName="employee">

            <column name="Имя" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Фамилия" type="varchar">
                <constraints nullable="false"/>
            </column>

            <column name="Команда" type="varchar">
                <constraints nullable="false"/>
            </column>
            
            <column name="Почта" type="varchar">
                <constraints primaryKey="true"/>
            </column>

            <column name="Должность" type="varchar">
                <constraints nullable="false"/>
            </column>

        </createTable>

    </changeSet>

</databaseChangeLog>